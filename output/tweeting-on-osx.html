<!DOCTYPE html>
<html lang="en">
<head>
        <title>Tweeting on OS X</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
                        <link href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate" title="But I Digress RSS Feed" />
        
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="http://github.com/msoulier">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href=".">But I Digress </a></h1>
                <h2>Random neuron firings, digitized heedless of the
                repurcussions.</h2>
                <nav><ul>
                                                                    <li><a href="./pages/michael-p-souliers-curriculum-vitae.html">Michael P. Soulier's Curriculum Vitae</a></li>
                                                                    <li ><a href="./category/customer-service.html">Customer Service</a></li>
                                    <li ><a href="./category/development.html">Development</a></li>
                                    <li ><a href="./category/driving.html">Driving</a></li>
                                    <li ><a href="./category/personal.html">Personal</a></li>
                                    <li ><a href="./category/quotes.html">Quotes</a></li>
                                    <li class="active"><a href="./category/technology.html">Technology</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="tweeting-on-osx.html" rel="bookmark"
           title="Permalink to Tweeting on OS X">Tweeting on OS X</a></h1>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="msoulier">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2012-11-25T09:00:00">
                Sun 25 November 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
        <p>In <a href="./category/technology.html">Technology</a>. </p>
<p>tags: <a href="./tag/os-x.html">OS X</a><a href="./tag/python.html">Python</a><a href="./tag/foss.html">FOSS</a></p></footer><!-- /.post-info -->      <p>For some time my desktop has been an older, underpowered Linux box, so using
services like <a class="reference external" href="http://www.twitter.com">Twitter</a> via the website has been painful, as loaded with heavy
javascript that would consume my CPU's limited resources.</p>
<p>So, like any <a class="reference external" href="http://www.python.org">Python</a> programmer would do, I wrote my own client. Well, lets be
honest, the hard work was done by the <a class="reference external" href="https://github.com/tweepy/tweepy">tweepy</a> library, I'm just using it. I
call it <a class="reference external" href="https://github.com/msoulier/twit">Twit</a>, and I've been using it to post for some time now, lightweight
from the command-line. I also keep one running, polling my account for new
posts, and notifying me when there are new posts and pulling them down.</p>
<p>My notifications come in many forms, depending on the command-line options. I
can just watch them show up in text in the shell, I can use <a class="reference external" href="http://freecode.com/projects/xosd">xosd</a> to display
notifications on your X11 desktop, It can use <a class="reference external" href="http://developer-next.gnome.org/libnotify/">libnotify</a> in Gnome to display
temporary notifications that drop down in the corner of the screen.</p>
<p>As I'm now playing with an OS X desktop, libnotify isn't supported. I could
use xosd along with <a class="reference external" href="http://xquartz.macosforge.org/trac/wiki">XQuartz</a>, but I'd prefer more native integration with OS
X, as it does have a notification system, via <a class="reference external" href="https://developer.apple.com/library/mac/#releasenotes/Cocoa/AppKit.html">AppKit</a>. Python is preinstalled
on OS X, and the AppKit module is included. I found a <a class="reference external" href="https://github.com/albertz/music-player/blob/master/notifications.py">great example</a> of how
to use it online, which made this much, much simpler, so thanks there.</p>
<p>I used it like so:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">notify_appkit</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Thanks to</span>
<span class="sd">    https://github.com/albertz/music-player/blob/master/notifications.py</span>
<span class="sd">    for how to do this.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">notifCenter</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">notifCenter</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">AppKit</span>
        <span class="n">notifCenter</span> <span class="o">=</span> \
            <span class="n">AppKit</span><span class="o">.</span><span class="n">NSUserNotificationCenter</span><span class="o">.</span><span class="n">defaultUserNotificationCenter</span><span class="p">()</span>
        <span class="n">appDelegate</span> <span class="o">=</span> <span class="n">AppKit</span><span class="o">.</span><span class="n">NSApplication</span><span class="o">.</span><span class="n">sharedApplication</span><span class="p">()</span><span class="o">.</span><span class="n">delegate</span><span class="p">()</span>
        <span class="n">notifCenter</span><span class="o">.</span><span class="n">setDelegate_</span><span class="p">(</span><span class="n">appDelegate</span><span class="p">)</span>

    <span class="n">notif</span> <span class="o">=</span> <span class="n">AppKit</span><span class="o">.</span><span class="n">NSUserNotification</span><span class="o">.</span><span class="n">alloc</span><span class="p">()</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Tweet by </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">status</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
    <span class="n">notif</span><span class="o">.</span><span class="n">setTitle_</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">notif</span><span class="o">.</span><span class="n">setInformativeText_</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="n">notifCenter</span><span class="o">.</span><span class="n">deliverNotification_</span><span class="p">(</span><span class="n">notif</span><span class="p">)</span>
</pre></div>
<p>Now, this does cause a little icon on the dock to jump up and down, so I'll
need to look into that, and how to open the browser to twitter or the embedded
link when the notification is clicked on, but it's a good start.</p>

    </div><!-- /.entry-content -->
        <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "tweeting-on-osx.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://butidigressca.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                                                    <li><a href="http://python.org">Python.org</a></li>
                                                    <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                                                    <li><a href="http://fit613.wordpress.com">Fit613</a></li>
                                                    <li><a href="http://excess.org">Ian Ward</a></li>
                                                    <li><a href="http://www.mahdiyusuf.com/">Mahdi Yusuf</a></li>
                                                    <li><a href="http://mikegrouchy.com/">Mike Grouchy</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                                                                                                                    <li><a href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate">rss feed</a></li>
                                                            
                                                    <li><a href="http://twitter.com/msoulier">Twitter</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                <p>Email me at msoulier at digitaltorque dot ca</p>
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'butidigressca';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>