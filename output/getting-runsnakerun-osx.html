<!DOCTYPE html>
<html lang="en">
<head>
        <title>Getting RunSnakeRun Working on Mac OS X</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate" title="But I Digress RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="http://github.com/msoulier">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href=".">But I Digress </a></h1>
                <h2>Random neuron firings, digitized heedless of the
                repurcussions.</h2>
                <nav><ul>
                    <li ><a href="./category/customer-service.html">Customer Service</a></li>
                    <li ><a href="./category/development.html">Development</a></li>
                    <li ><a href="./category/driving.html">Driving</a></li>
                    <li ><a href="./category/pens.html">Pens</a></li>
                    <li ><a href="./category/personal.html">Personal</a></li>
                    <li ><a href="./category/quotes.html">Quotes</a></li>
                    <li class="active"><a href="./category/technology.html">Technology</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="getting-runsnakerun-osx.html" rel="bookmark"
           title="Permalink to Getting RunSnakeRun Working on Mac OS X">Getting RunSnakeRun Working on Mac OS X</a></h1>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="msoulier">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-11-03T10:20:00-05:00">
                Sun 03 November 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="./author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="./category/technology.html">Technology</a>. </p>
<p>tags: <a href="./tag/os-x.html">OS X</a></p></footer><!-- /.post-info -->      <p>As I <a class="reference external" href="http://www.but-i-digress.ca/fruit-on-my-screen.html">mentioned previously</a>, I have a Mac Mini at home as a workstation. While
some things are easier working with it, like video editing, and basic office
productivity, some things are harder.</p>
<p>One of the harder areas on OS X is customizing the Unix side of it for my
development environment on Linux. I work primarily with Python, which does
ship with Mountain Lion (Python 2.7), but it doesn't have everything. For
example, the incredibly useful <a class="reference external" href="http://www.virtualenv.org/en/latest/">virtualenv</a> was something that I had to add
on later, and many things I pulled from the <a class="reference external" href="http://brew.sh/">Homebrew</a> project, which has
been incredibly useful to a Linux geek like me.</p>
<p>I currently have a strong need to profile my work, and there's no
substitute to the impressive work of <a class="reference external" href="http://www.vrplumber.com/programming/runsnakerun/">RunSnakeRun</a>. RunSnakeRun requires
<a class="reference external" href="http://www.wxpython.org/">wxPython</a>, which requires wxGtk, which requires wxWindows, etc, etc. One
simple way to get wxPython on Mac is Homebrew, where it's called <cite>wxMac</cite>:</p>
<pre class="literal-block">
brew install wxmac
</pre>
<p>That works just fine, although it does not, at present, update the PYTHONPATH
to include it. I found this was required to put it into the path:</p>
<pre class="literal-block">
sudo cat /usr/local/lib/python2.7/site-packages &gt; \
    /Library/Python/2.7/site-packages/wx.pth
</pre>
<p>At which point, you should be able to &quot;import wx&quot; in python, and it should
work. Now, RunSnakeRun can be easily installed in a virtualenv, like so:</p>
<pre class="literal-block">
mkvirtualenv snake
pip install SquareMap RunSnakeRun
</pre>
<p>The problem is that wx requires permission to access the display on the Mac. I
don't know the details of this, but Robin Dunn of wxPython fame goes into
the issue <a class="reference external" href="http://wiki.wxpython.org/wxPythonVirtualenvOnMac">here, with a solution</a>. His solution is a bit old, and I'm running
Mountain Lion, so I adapted it a bit.</p>
<p>The python executable is simply <cite>/usr/bin/python</cite>, so I just did this:</p>
<pre class="literal-block">
(snake)msoulier&#64;merlin:~/envs/snake$ cat ~/envs/snake/bin/runwx
#!/bin/bash

PYVER=2.7
PYTHON=/usr/bin/python

ENV=$HOME/envs/snake

export PYTHONHOME=$ENV
exec $PYTHON &quot;$&#64;&quot;
</pre>
<p>Now, the silly indirection of easy_install makes this a little tougher. You
can't just run the runsnake script with this wrapper, as it apparently invokes
the actual runsnake.py script in some indirect manner that results in losing
desired environment we're trying to establish here. If I understood
what easy_install was doing better, I could likely hack it, but I kept it
simple, and just run the <cite>runsnake.py</cite> directly with the wrapper:</p>
<pre class="literal-block">
runwx ./lib/python2.7/site-packages/runsnakerun/runsnake.py \
    ~/mycode.prof
</pre>
<p>And, it works!</p>
<p>Improvements welcome. I'm just happy that it's working. Not everything &quot;just
works&quot; when you're on a Mac.</p>

    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "getting-runsnakerun-osx.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://butidigressca.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                            <li><a href="http://python.org">Python.org</a></li>
                            <li><a href="http://life-unbalanced.tumblr.com/">Life, unbalanced</a></li>
                            <li><a href="http://excess.org">Ian Ward</a></li>
                            <li><a href="http://www.mahdiyusuf.com/">Mahdi Yusuf</a></li>
                            <li><a href="http://mikegrouchy.com/">Mike Grouchy</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="http://twitter.com/msoulier">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                <p>Email me at msoulier at digitaltorque dot ca</p>
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'butidigressca';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>