<!DOCTYPE html>
<html lang="en">
<head>
        <title>But I Digress - Michael P. Soulier</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate" title="But I Digress RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="http://github.com/msoulier">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="..">But I Digress </a></h1>
                <h2>Random neuron firings, digitized heedless of the
                repurcussions.</h2>
                <nav><ul>
                    <li><a href="../pages/mike-souliers-curriculum-vitae.html">Mike Soulier's Curriculum Vitae</a></li>
                    <li ><a href="../category/development.html">Development</a></li>
                    <li ><a href="../category/driving.html">Driving</a></li>
                    <li ><a href="../category/personal.html">Personal</a></li>
                    <li ><a href="../category/quotes.html">Quotes</a></li>
                    <li ><a href="../category/technology.html">Technology</a></li>
                </ul></nav>
        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../validation-server-call-angularjs.html">Validation with Server-side call in AngularJS</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2014-01-19T19:30:00">
                Sun 19 January 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/angularjs.html">AngularJS</a><a href="../tag/rest.html">ReST</a></p></footer><!-- /.post-info --><p>I've been playing with <a class="reference external" href="http://www.angularjs.org">AngularJS</a> for a little while, and in trying to
understand how to validate a user's data as it's being entered, it didn't take
long to find that to check with the server for some validation rules, like
uniqueness constraints.</p>
<p>This presented a problem since the built-in validators know nothing about the
data on the server. I looked into the issue and found that creating my own
directive was the way to go. Difficult when I'm an AngularJS newbie and I
barely understand such things, but luckily the AngularJS online community was
helpful. To validate the uniqeness of an &quot;ICP&quot; (don't ask) when the user stops
typing, it's not overly difficult.</p>
<div class="highlight"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;uniqueIcpName&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">promise</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span>
        <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;ngModel&#39;</span><span class="p">,</span>
        <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">ctrl</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//when the scope changes, check</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">ngModel</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// if there was a previous attempt, stop it.</span>
                <span class="nx">$timeout</span><span class="p">.</span><span class="nx">cancel</span><span class="p">(</span><span class="nx">promise</span><span class="p">);</span>

                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uniqueIcpName</span><span class="p">);</span>

                <span class="c1">// Determine the url based on whether this is an add or a</span>
                <span class="c1">// modify.</span>
                <span class="kd">var</span> <span class="nx">url</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uniqueIcpName</span> <span class="o">===</span> <span class="s2">&quot;add&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;/valid/icp/add/name/&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;/valid/icp/modify/name/&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// start a new attempt with a delay to keep it from</span>
                <span class="c1">// getting too &quot;chatty&quot;.</span>
                <span class="nx">promise</span> <span class="o">=</span> <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="c1">// call to some API that returns { isValid: true } or</span>
                    <span class="c1">// { isValid: false }</span>
                    <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">success</span><span class="p">(</span>
                            <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">ctrl</span><span class="p">.</span><span class="nx">$setValidity</span><span class="p">(</span><span class="s1">&#39;uniqueIcpName&#39;</span><span class="p">,</span>
                                                <span class="nx">data</span><span class="p">.</span><span class="nx">isValid</span><span class="p">);</span>
                            <span class="p">});</span>
                <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</pre></div>
<p>The timeout is a neat trick someone taught me, so you launch the event on every
keypress, but on the next keypress you cancel the previous one, and put in a
500ms delay on the ReST call, so you don't really make the request until the
user stops typing for a full half second. Meanwhile I put in a little attribute
check based on creation vs. modification of the data, since uniqueness checks
must exclude the current object on a modification.</p>
<p>Then all you need is the server-side returning an <cite>isValid</cite> attribute, which
should have a boolean value. Simple, and it works.</p>
<p>There are <a href="../validation-server-call-angularjs.html#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../drivers-its-not-that-hard.html" rel="bookmark"
                           title="Permalink to Drivers, it's really not that hard">Drivers, it's really not that hard</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-11-03T10:20:00">
                Sun 03 November 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/driving.html">Driving</a>. </p>
<p>tags: <a href="../tag/cars.html">Cars</a><a href="../tag/canada.html">Canada</a></p></footer><!-- /.post-info -->                <p><a class="reference external" href="http://www.mto.gov.on.ca/english/dandv/driver/handbook/section2.6.4.shtml">http://www.mto.gov.on.ca/english/dandv/driver/handbook/section2.6.4.shtml</a></p>

                <a class="readmore" href="../drivers-its-not-that-hard.html">read more</a>
<p>There are <a href="../drivers-its-not-that-hard.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../java-pointlessly-difficult.html" rel="bookmark"
                           title="Permalink to Java, usable but pointlessly difficult">Java, usable but pointlessly difficult</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-06-05T00:30:00">
                Wed 05 June 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/java.html">Java</a></p></footer><!-- /.post-info -->                <p>I've been working on a REST client in Java at work lately. I know, it scares
me too. I've had to revisit much of my old Java knowledge, and pick up a lot
of new chops in Swing, Eclipse, and author a decent JSON-parsing HTTPS client.</p>
<p>Our internal ...</p>
                <a class="readmore" href="../java-pointlessly-difficult.html">read more</a>
<p>There are <a href="../java-pointlessly-difficult.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../matplotlib-is-really-cool.html" rel="bookmark"
                           title="Permalink to Matplotlib is really cool">Matplotlib is really cool</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-03-25T15:30:00">
                Mon 25 March 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/python.html">Python</a></p></footer><!-- /.post-info -->                <p>Recently at work I needed to produce a pie chart for some data that I had to
crawl through using basic scripting. Pulling out the numbers, sorting,
filtering, etc., was all tasks that I'm used to doing, but for graphing I
normally use <a class="reference external" href="http://www.gnuplot.org">Gnuplot</a>. But, Gnuplot can't do ...</p>
                <a class="readmore" href="../matplotlib-is-really-cool.html">read more</a>
<p>There are <a href="../matplotlib-is-really-cool.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../joystick-mac-os-x-flightgear.html" rel="bookmark"
                           title="Permalink to Joysticks on Mac OS X in Flightgear">Joysticks on Mac OS X in Flightgear</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-03-11T22:00:00">
                Mon 11 March 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/os-x.html">OS X</a></p></footer><!-- /.post-info -->                <p>I like flight simulators. I've played all of the good ones, <a class="reference external" href="http://www.flightgear.org/">Flightgear</a> is
an open-source flight simulator that isn't bad, and is steadily getting better
with every release. While it is available to run on Mac, there's no way to
calibrate the Joystick due to a lack ...</p>
                <a class="readmore" href="../joystick-mac-os-x-flightgear.html">read more</a>
<p>There are <a href="../joystick-mac-os-x-flightgear.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../video-on-raspbian.html" rel="bookmark"
                           title="Permalink to Video on Raspbian">Video on Raspbian</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-03-11T21:00:00">
                Mon 11 March 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/linux.html">Linux</a><a href="../tag/raspberry-pi.html">Raspberry Pi</a></p></footer><!-- /.post-info -->                <p>Currently our upstairs TV has a <a class="reference external" href="http://www.raspberrypi.org/">raspberry pi</a> attached to it. It's running
the basic <a class="reference external" href="http://www.raspbian.org/">Raspbian</a> distribution, based on <a class="reference external" href="http://www.debian.org/">Debian Linux</a>. I'm using it for
development as well as for a media center at the moment, so I'm not using
<a class="reference external" href="http://www.raspbmc.com/">RaspBMC</a>, I'm going to order another ...</p>
                <a class="readmore" href="../video-on-raspbian.html">read more</a>
<p>There are <a href="../video-on-raspbian.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../jim-butcher-on-men-vs-women.html" rel="bookmark"
                           title="Permalink to Jim Butcher on Men vs. Women">Jim Butcher on Men vs. Women</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-01-01T09:30:00">
                Tue 01 January 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/quotes.html">Quotes</a>. </p>
<p>tags: <a href="../tag/funny.html">Funny</a></p></footer><!-- /.post-info -->                <p>I'm reading Jim Butcher's &quot;Cold Days&quot;, his latest installment in the
<a class="reference external" href="http://www.jim-butcher.com/books/dresden">Dresden Files</a>, and I felt the need to share this quote:</p>
<blockquote>
<p>So, ladies, if you ever have some conversation with your boyfriend or
husband or brother or male friend, and you are telling him something
perfectly obvious ...</p></blockquote>
                <a class="readmore" href="../jim-butcher-on-men-vs-women.html">read more</a>
<p>There are <a href="../jim-butcher-on-men-vs-women.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../checking-the-weather.html" rel="bookmark"
                           title="Permalink to Checking the weather">Checking the weather</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-12-23T20:30:00">
                Sun 23 December 2012
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/development.html">Development</a>. </p>
<p>tags: <a href="../tag/python.html">Python</a></p></footer><!-- /.post-info -->                <p>A while back I needed a way to check the weather forecast, simply, from a
terminal, as is the preference of most Unix geeks like me. Being a Canadian,
I'm not interested in the Weather Channel as much as the Environment Canada
data. Thankfully, they do publish an RSS ...</p>
                <a class="readmore" href="../checking-the-weather.html">read more</a>
<p>There are <a href="../checking-the-weather.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../signatures-in-oauth.html" rel="bookmark"
                           title="Permalink to Signatures in OAuth">Signatures in OAuth</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-12-21T18:00:00">
                Fri 21 December 2012
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/oauth.html">OAuth</a><a href="../tag/web-services.html">Web Services</a><a href="../tag/python.html">Python</a><a href="../tag/perl.html">Perl</a></p></footer><!-- /.post-info -->                <p>Hi again. I already went into the basics of OAuth in a <a class="reference external" href="http://www.but-i-digress.ca/understanding-oauth.html">previous post</a>, and
alluded to the signatures being the hard part of the implementation. I'm using
a <a class="reference external" href="https://github.com/leah/python-oauth/">python-oauth</a> module for the client, but for the server, I decided to
implement my own in <a class="reference external" href="http://www.perl.org/">Perl</a> and <a class="reference external" href="http://mojolicio.us/">Mojolicious</a>, since ...</p>
                <a class="readmore" href="../signatures-in-oauth.html">read more</a>
<p>There are <a href="../signatures-in-oauth.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../understanding-oauth.html" rel="bookmark"
                           title="Permalink to Understanding OAuth">Understanding OAuth</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-12-20T10:30:00">
                Thu 20 December 2012
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/oauth.html">OAuth</a><a href="../tag/web-services.html">Web Services</a></p></footer><!-- /.post-info -->                <p>We meet again. Thanks for stopping by. This post has a high geek factor, so if
you're not one, feel free to move along, nothing to see here.</p>
<p>Still here? K, your funeral. At work, I'm trying to add a <a class="reference external" href="http://en.wikipedia.org/wiki/Representational_state_transfer">ReST</a> Web Service to
a product that could ...</p>
                <a class="readmore" href="../understanding-oauth.html">read more</a>
<p>There are <a href="../understanding-oauth.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="../author/michael-p-soulier2.html">&raquo;</a>
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                            <li><a href="http://python.org">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                            <li><a href="http://fit613.wordpress.com">Fit613</a></li>
                            <li><a href="http://excess.org">Ian Ward</a></li>
                            <li><a href="http://www.mahdiyusuf.com/">Mahdi Yusuf</a></li>
                            <li><a href="http://mikegrouchy.com/">Mike Grouchy</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="http://twitter.com/msoulier">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                <p>Email me at msoulier at digitaltorque dot ca</p>
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'butidigressca';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>