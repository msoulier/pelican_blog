<!DOCTYPE html>
<html lang="en">
<head>
        <title>But I Digress - Technology</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate" title="But I Digress RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="http://github.com/msoulier">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="..">But I Digress </a></h1>
                <h2>Random neuron firings, digitized heedless of the
                repurcussions.</h2>
                <nav><ul>
                    <li><a href="../pages/mike-souliers-curriculum-vitae.html">Mike Soulier's Curriculum Vitae</a></li>
                    <li ><a href="../category/customer-service.html">Customer Service</a></li>
                    <li ><a href="../category/development.html">Development</a></li>
                    <li ><a href="../category/driving.html">Driving</a></li>
                    <li ><a href="../category/personal.html">Personal</a></li>
                    <li ><a href="../category/quotes.html">Quotes</a></li>
                    <li class="active"><a href="../category/technology.html">Technology</a></li>
                </ul></nav>
        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../a-working-logger.html">A working logger</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2015-12-28T11:00:00-05:00">
                Mon 28 December 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/c.html">C++</a></p></footer><!-- /.post-info --><p>So it took some work, and likely there are better ways to do this, but this
logger satisfies my current needs in providing multiple levels of logging,
and an iostream interface to make composing strings simpler. First some
includes and definitions.</p>
<div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;ostream&gt;</span>
<span class="cp">#include &lt;boost/thread.hpp&gt;</span>
<span class="cp">#include &lt;boost/thread/mutex.hpp&gt;</span>

<span class="cp">#define LOGLEVEL_TRACE 0</span>
<span class="cp">#define LOGLEVEL_DEBUG 10</span>
<span class="cp">#define LOGLEVEL_INFO 20</span>
<span class="cp">#define LOGLEVEL_WARN 30</span>
<span class="cp">#define LOGLEVEL_ERROR 40</span>
</pre></div>
<p>Then my thread-local buffer.</p>
<div class="highlight"><pre><span class="k">extern</span> <span class="n">boost</span><span class="o">::</span><span class="n">thread_specific_ptr</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="o">&gt;</span> <span class="n">tls_buffer</span><span class="p">;</span>
</pre></div>
<p>The intention here is to &quot;collect&quot; logs from successive calls to the &lt;&lt; operator
in one line, using a thread-local buffer to prevent each thread from
stepping on one another. At the end of the line, we will then synchronize
around the write to the std::ostream and flush the buffer. There might be a
way to declare the tls_buffer inside of the class but my C++ chops are
currently insufficient.</p>
<p>I am also aware that one could use a temporary variable hack to get a
thread-local buffer without using boost here, but the examples that I found
showing this were very hard for me to understand. This, I understand so I'm
going with it for now.</p>
<p>Now, my logger is broken up into two classes. The main logger, and the
logger handlers that are used to do the actual logging at each level
(ie. debug, info, error, etc). This handler is where the &lt;&lt; operator
overloading magic happens.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">MLoggerHandler</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">mutex</span><span class="o">&amp;</span> <span class="n">mutex</span><span class="p">,</span>
                <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">ostream</span><span class="p">,</span>
                <span class="kt">int</span> <span class="n">threshold</span><span class="p">,</span>
                <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">prefix</span><span class="p">);</span>
    <span class="o">~</span><span class="n">MLoggerHandler</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">setLevel</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">);</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
    <span class="c1">// For handling &lt;&lt; from any object.</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">T</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Only log if the level is set above our threshold.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_threshold</span> <span class="o">&gt;=</span> <span class="n">m_level</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">tls_buffer</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">tls_buffer</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="p">());</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">tls_buffer</span><span class="o">-&gt;</span><span class="n">str</span><span class="p">().</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="o">*</span><span class="n">tls_buffer</span> <span class="o">&lt;&lt;</span> <span class="n">localDateTime</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m_prefix</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">input</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="o">*</span><span class="n">tls_buffer</span> <span class="o">&lt;&lt;</span> <span class="n">input</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// For handling std::endl</span>
    <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// Only log if the level is set above our threshold.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_threshold</span> <span class="o">&gt;=</span> <span class="n">m_level</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">boost</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">{</span><span class="n">m_mutex</span><span class="p">};</span>
            <span class="c1">// Flush the buffer</span>
            <span class="n">m_ostream</span> <span class="o">&lt;&lt;</span> <span class="n">tls_buffer</span><span class="o">-&gt;</span><span class="n">str</span><span class="p">();</span>
            <span class="n">f</span><span class="p">(</span><span class="n">m_ostream</span><span class="p">);</span>
            <span class="c1">// Clear the buffer</span>
            <span class="n">tls_buffer</span><span class="o">-&gt;</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">m_ostream</span><span class="p">;</span>
    <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
    <span class="c1">// A mutex passed in from the main logger for synchronization.</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">mutex</span><span class="o">&amp;</span> <span class="n">m_mutex</span><span class="p">;</span>
    <span class="c1">// The logging level.</span>
    <span class="kt">int</span> <span class="n">m_level</span><span class="p">;</span>
    <span class="c1">// The output stream.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">m_ostream</span><span class="p">;</span>
    <span class="c1">// The threshold for logging for this handler.</span>
    <span class="kt">int</span> <span class="n">m_threshold</span><span class="p">;</span>
    <span class="c1">// The string prefix for logging.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_prefix</span><span class="p">;</span>
    <span class="c1">// Return the current date and time as a localized string.</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">localDateTime</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
<!-- ** -->
<p>Note that the &lt;&lt; overload takes any type capable of itself using the &lt;&lt;
operator, while there's a separate method required to implement handling
for the <cite>std::endl</cite> at the end of the line. This allows us to knwo when the
line is terminated, to write and flush the buffer, but it also imposes the
limitation that the user of this logger <em>must</em> provide the <cite>std::endl</cite> to
terminate the line or the logger won't work properly. These handlers are
returned as a result of calling the individual level methods in the main
logger, like <cite>info()</cite>, <cite>debug()</cite>, etc.</p>
<p>Also note that when the thread-local buffer is empty, that is used as an
indication of building the beginning of the line, and thus starting with
a logging level prefix and a timestamp.</p>
<p>And now the main logger...</p>
<div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">* The MLogger (Mike-logger) is a thread-safe C++ logger using the iostream operators.</span>
<span class="cm">* To use it, you must invoke a logging level handler which will return an</span>
<span class="cm">* MLoggerHandler reference, and then terminate your line with std::endl to ensure</span>
<span class="cm">* that the buffer is flushed and the line terminated with a newline.</span>
<span class="cm">*/</span>
<span class="k">class</span> <span class="nc">MLogger</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">MLogger</span><span class="p">();</span>
    <span class="n">MLogger</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">);</span>
    <span class="o">~</span><span class="n">MLogger</span><span class="p">();</span>
    <span class="c1">// Set the current logging level</span>
    <span class="kt">void</span> <span class="nf">setLevel</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">);</span>
    <span class="c1">// Get the current logging level</span>
    <span class="kt">int</span> <span class="nf">getLevel</span><span class="p">();</span>
    <span class="c1">// Convenience methods for trace level log.</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">trace</span><span class="p">();</span>
    <span class="c1">// Convenience methods for debug level log</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">debug</span><span class="p">();</span>
    <span class="c1">// Convenience methods for info level log</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">info</span><span class="p">();</span>
    <span class="c1">// Convenience methods for warning level log</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">warn</span><span class="p">();</span>
    <span class="c1">// Convenicence methods for error level log</span>
    <span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">error</span><span class="p">();</span>
<span class="k">private</span><span class="o">:</span>
    <span class="c1">// The logger name.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_name</span><span class="p">;</span>
    <span class="c1">// The current log level.</span>
    <span class="kt">int</span> <span class="n">m_level</span><span class="p">;</span>
    <span class="c1">// The output stream for the logger.</span>
    <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">m_ostream</span><span class="p">;</span>
    <span class="c1">// The mutex used for synchronization.</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">mutex</span> <span class="n">m_mutex</span><span class="p">;</span>
    <span class="c1">// Trace handler</span>
    <span class="n">MLoggerHandler</span> <span class="n">m_trace_handler</span><span class="p">;</span>
    <span class="c1">// Debug handler</span>
    <span class="n">MLoggerHandler</span> <span class="n">m_debug_handler</span><span class="p">;</span>
    <span class="c1">// Info handler</span>
    <span class="n">MLoggerHandler</span> <span class="n">m_info_handler</span><span class="p">;</span>
    <span class="c1">// Warn handler</span>
    <span class="n">MLoggerHandler</span> <span class="n">m_warn_handler</span><span class="p">;</span>
    <span class="c1">// Error handler</span>
    <span class="n">MLoggerHandler</span> <span class="n">m_error_handler</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
<!-- ** -->
<p>The implementation is nothing special, but for completeness here it is.</p>
<div class="highlight"><pre><span class="n">boost</span><span class="o">::</span><span class="n">thread_specific_ptr</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="o">&gt;</span> <span class="n">tls_buffer</span><span class="p">;</span>

<span class="n">MLoggerHandler</span><span class="o">::</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">mutex</span><span class="o">&amp;</span> <span class="n">mutex</span><span class="p">,</span>
                            <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">ostream</span><span class="p">,</span>
                            <span class="kt">int</span> <span class="n">threshold</span><span class="p">,</span>
                            <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">prefix</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">m_mutex</span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_level</span><span class="p">(</span><span class="n">LOGLEVEL_INFO</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_ostream</span><span class="p">(</span><span class="n">ostream</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_threshold</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
<span class="p">{</span> <span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">::~</span><span class="n">MLoggerHandler</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="kt">void</span> <span class="n">MLoggerHandler</span><span class="o">::</span><span class="n">setLevel</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">m_level</span> <span class="o">=</span> <span class="n">level</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">MLoggerHandler</span><span class="o">::</span><span class="n">localDateTime</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">format</span> <span class="o">=</span> <span class="s">&quot;%b %d %Y @ %X %Z&quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="kt">time_t</span> <span class="n">t</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">strftime</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="n">format</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">localtime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t</span><span class="p">)))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">MLogger</span><span class="o">::</span><span class="n">MLogger</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">m_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_level</span><span class="p">(</span><span class="n">LOGLEVEL_INFO</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_ostream</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">m_trace_handler</span><span class="p">(</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">m_mutex</span><span class="p">,</span> <span class="n">m_ostream</span><span class="p">,</span> <span class="n">LOGLEVEL_TRACE</span><span class="p">,</span> <span class="s">&quot;TRACE&quot;</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_debug_handler</span><span class="p">(</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">m_mutex</span><span class="p">,</span> <span class="n">m_ostream</span><span class="p">,</span> <span class="n">LOGLEVEL_DEBUG</span><span class="p">,</span> <span class="s">&quot;DEBUG&quot;</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_info_handler</span><span class="p">(</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">m_mutex</span><span class="p">,</span> <span class="n">m_ostream</span><span class="p">,</span> <span class="n">LOGLEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;INFO&quot;</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_warn_handler</span><span class="p">(</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">m_mutex</span><span class="p">,</span> <span class="n">m_ostream</span><span class="p">,</span> <span class="n">LOGLEVEL_WARN</span><span class="p">,</span> <span class="s">&quot;WARN&quot;</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_error_handler</span><span class="p">(</span><span class="n">MLoggerHandler</span><span class="p">(</span><span class="n">m_mutex</span><span class="p">,</span> <span class="n">m_ostream</span><span class="p">,</span> <span class="n">LOGLEVEL_ERROR</span><span class="p">,</span> <span class="s">&quot;ERROR&quot;</span><span class="p">))</span>
    <span class="p">{</span> <span class="p">}</span>

<span class="n">MLogger</span><span class="o">::</span><span class="n">MLogger</span><span class="p">()</span> <span class="o">:</span> <span class="n">MLogger</span><span class="p">(</span><span class="s">&quot;No name&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">MLogger</span><span class="o">::~</span><span class="n">MLogger</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="kt">int</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">getLevel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_level</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">setLevel</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">m_level</span> <span class="o">=</span> <span class="n">level</span><span class="p">;</span>
    <span class="c1">// And set it on all of the logger handlers.</span>
    <span class="n">m_trace_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
    <span class="n">m_debug_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
    <span class="n">m_info_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
    <span class="n">m_warn_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
    <span class="n">m_error_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">trace</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_trace_handler</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">debug</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_debug_handler</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">info</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_info_handler</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">warn</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_warn_handler</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">MLoggerHandler</span><span class="o">&amp;</span> <span class="n">MLogger</span><span class="o">::</span><span class="n">error</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_error_handler</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<!-- ** -->
<p>Currently, I'm using this through a simple shared global called <cite>logger</cite>,
so you then just use it like so:</p>
<div class="highlight"><pre><span class="n">MLogger</span> <span class="n">logger</span><span class="p">;</span>

<span class="n">logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">LOGLEVEL_INFO</span><span class="p">);</span>

<span class="c1">// This produces no output at INFO logging level.</span>
<span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;The current value of foo is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">foo</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// This produces output.</span>
<span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;The current value of bar is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">bar</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
<p>So, it works, it's thread safe, and I don't have to manually build my own
logging strings with <cite>std::stringstream</cite>, saving endless lines of code. I'm
certain that it can be improved, I can certainly build in facilities like
log rotation, compression, etc. But, it's a start.</p>
<p>There are <a href="../a-working-logger.html#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../disable-bash-completion.html" rel="bookmark"
                           title="Permalink to Disabling Bash Completion">Disabling Bash Completion</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-04-10T20:30:00-04:00">
                Fri 10 April 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/bash.html">Bash</a><a href="../tag/linux.html">Linux</a></p></footer><!-- /.post-info -->                <p>The bash shell is the standard shell on most Unix-like systems. It is full of
great features to make your life typing on a command-line fairly painless. One
of the most important features for any command-line is the ability to reduce
unneeded typing via smart completion. Say I want to ...</p>
                <a class="readmore" href="../disable-bash-completion.html">read more</a>
<p>There are <a href="../disable-bash-completion.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../why-x11-still-rocks.html" rel="bookmark"
                           title="Permalink to Why X11 still rocks">Why X11 still rocks</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-09-16T13:00:00-04:00">
                Tue 16 September 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/linux.html">Linux</a><a href="../tag/x11.html">X11</a></p></footer><!-- /.post-info -->                <p>For years now, I've heard from Linux developers about why the venerable X11 is
an obsolete piece of crap that needs replacing. The Wayland project aims to
do so, real soon now, kinda like Perl 6. It's a tough problem, so I can hardly
complain.</p>
<p>Still, when I ...</p>
                <a class="readmore" href="../why-x11-still-rocks.html">read more</a>
<p>There are <a href="../why-x11-still-rocks.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../ipython-notebook-macosx.html" rel="bookmark"
                           title="Permalink to Getting IPython Notebook Working on Mac OS X">Getting IPython Notebook Working on Mac OS X</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-04-20T08:00:00-04:00">
                Sun 20 April 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/python.html">Python</a><a href="../tag/mac-os-x.html">Mac OS X</a></p></footer><!-- /.post-info -->                <p>I've been getting into <a class="reference external" href="http://ipython.org/notebook.html">ipython notebook</a> recently, especially since seeing
some demos at <a class="reference external" href="https://us.pycon.org/2014/">PyCon 2014</a>. I maintain a toolchain at work for processing
monthly stats of our product's use in the field, using python but graphing in
<a class="reference external" href="http://www.gnuplot.info/">GNUPlot</a>, Given the capabilities of <a class="reference external" href="http://matplotlib.org/">matplotlib</a> and <a class="reference external" href="http://pandas.pydata.org/">pandas</a>, this little
project ...</p>
                <a class="readmore" href="../ipython-notebook-macosx.html">read more</a>
<p>There are <a href="../ipython-notebook-macosx.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../validation-server-call-angularjs.html" rel="bookmark"
                           title="Permalink to Validation with Server-side call in AngularJS">Validation with Server-side call in AngularJS</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-01-19T19:30:00-05:00">
                Sun 19 January 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/angularjs.html">AngularJS</a><a href="../tag/rest.html">ReST</a></p></footer><!-- /.post-info -->                <p>I've been playing with <a class="reference external" href="http://www.angularjs.org">AngularJS</a> for a little while, and in trying to
understand how to validate a user's data as it's being entered, it didn't take
long to find that to check with the server for some validation rules, like
uniqueness constraints.</p>
<p>This presented a ...</p>
                <a class="readmore" href="../validation-server-call-angularjs.html">read more</a>
<p>There are <a href="../validation-server-call-angularjs.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../getting-runsnakerun-osx.html" rel="bookmark"
                           title="Permalink to Getting RunSnakeRun Working on Mac OS X">Getting RunSnakeRun Working on Mac OS X</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-11-03T10:20:00-05:00">
                Sun 03 November 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/os-x.html">OS X</a></p></footer><!-- /.post-info -->                <p>As I <a class="reference external" href="http://www.but-i-digress.ca/fruit-on-my-screen.html">mentioned previously</a>, I have a Mac Mini at home as a workstation. While
some things are easier working with it, like video editing, and basic office
productivity, some things are harder.</p>
<p>One of the harder areas on OS X is customizing the Unix side of it for my ...</p>
                <a class="readmore" href="../getting-runsnakerun-osx.html">read more</a>
<p>There are <a href="../getting-runsnakerun-osx.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../scrypting-rsa-encryption.html" rel="bookmark"
                           title="Permalink to Scripting RSA Encryption">Scripting RSA Encryption</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-08-20T08:30:00-04:00">
                Tue 20 August 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/crypto.html">Crypto</a><a href="../tag/python.html">Python</a><a href="../tag/perl.html">Perl</a></p></footer><!-- /.post-info -->                <p>So, I have an <a class="reference external" href="http://oauth.net/core/1.0/">OAuth 1.0</a> implementation for work that I'm extending, and the
one area of OAuth 1.0 that I didn't implement was <a class="reference external" href="http://oauth.net/core/1.0/#anchor19">RSA-SHA1</a> signatures, as I
didn't think that anyone would care. Of course, someone cares. So, I'm looking
into them now ...</p>
                <a class="readmore" href="../scrypting-rsa-encryption.html">read more</a>
<p>There are <a href="../scrypting-rsa-encryption.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../java-pointlessly-difficult.html" rel="bookmark"
                           title="Permalink to Java, usable but pointlessly difficult">Java, usable but pointlessly difficult</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-06-05T00:30:00-04:00">
                Wed 05 June 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/java.html">Java</a></p></footer><!-- /.post-info -->                <p>I've been working on a REST client in Java at work lately. I know, it scares
me too. I've had to revisit much of my old Java knowledge, and pick up a lot
of new chops in Swing, Eclipse, and author a decent JSON-parsing HTTPS client.</p>
<p>Our internal ...</p>
                <a class="readmore" href="../java-pointlessly-difficult.html">read more</a>
<p>There are <a href="../java-pointlessly-difficult.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../matplotlib-is-really-cool.html" rel="bookmark"
                           title="Permalink to Matplotlib is really cool">Matplotlib is really cool</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-03-25T15:30:00-04:00">
                Mon 25 March 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/python.html">Python</a></p></footer><!-- /.post-info -->                <p>Recently at work I needed to produce a pie chart for some data that I had to
crawl through using basic scripting. Pulling out the numbers, sorting,
filtering, etc., was all tasks that I'm used to doing, but for graphing I
normally use <a class="reference external" href="http://www.gnuplot.org">Gnuplot</a>. But, Gnuplot can't do ...</p>
                <a class="readmore" href="../matplotlib-is-really-cool.html">read more</a>
<p>There are <a href="../matplotlib-is-really-cool.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h1><a href="../joystick-mac-os-x-flightgear.html" rel="bookmark"
                           title="Permalink to Joysticks on Mac OS X in Flightgear">Joysticks on Mac OS X in Flightgear</a></h1>
                </header>
                
                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-03-11T22:00:00-04:00">
                Mon 11 March 2013
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="../author/michael-p-soulier.html">Michael P. Soulier</a>
        </address>
<p>In <a href="../category/technology.html">Technology</a>. </p>
<p>tags: <a href="../tag/os-x.html">OS X</a></p></footer><!-- /.post-info -->                <p>I like flight simulators. I've played all of the good ones, <a class="reference external" href="http://www.flightgear.org/">Flightgear</a> is
an open-source flight simulator that isn't bad, and is steadily getting better
with every release. While it is available to run on Mac, there's no way to
calibrate the Joystick due to a lack ...</p>
                <a class="readmore" href="../joystick-mac-os-x-flightgear.html">read more</a>
<p>There are <a href="../joystick-mac-os-x-flightgear.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="../category/technology2.html">&raquo;</a>
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                            <li><a href="http://python.org">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                            <li><a href="http://fit613.wordpress.com">Fit613</a></li>
                            <li><a href="http://excess.org">Ian Ward</a></li>
                            <li><a href="http://www.mahdiyusuf.com/">Mahdi Yusuf</a></li>
                            <li><a href="http://mikegrouchy.com/">Mike Grouchy</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://feeds.feedburner.com/ButIDigress" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="http://twitter.com/msoulier">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                <p>Email me at msoulier at digitaltorque dot ca</p>
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'butidigressca';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>